!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).batchPromise=e()}(this,function(){"use strict";return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.concurrent,o=void 0===t?1/0:t,i=e.rejectOnError,f=void 0!==i&&i,c=0,r=[],u=[];return new Promise(function(e,t){!function i(){if(c!==n.length)for(var s=function(){var o=c,s=n[c++];if("function"==typeof s){var h=s();h instanceof Promise?(r.push(h),h.then(function(n){u[o]=n}).catch(function(n){u[o]=n,f&&t(n)}).then(function(){r.splice(r.indexOf(h),1),c===n.length?r.length||e(u):i()})):u[o]=h}else u[o]=s};r.length<o&&c!==n.length;)s();else r.length||e(u)}()})}});
